# Задача "Понимание JVM"

**Код для исследования:**

```java
public class JvmComprehension {
public static void main(String[] aers){
    //В момент вызова метода создается фрейм main в стеке
    int i =1;             //1 Во фрейме main создается переменная i, с значением  = 1;
    Object o = new Object(); //2 Во фрейме main создается переменная о и хранит ссылку на обьект new Object 
                            // новый обект создается для хранения в heap (куча). 
    Integer ii = 2;         //3 Во фрейме main создается переменная ii и хранит в себе ссылку на значение обьекта Integer
                            //само значение обекта хранится в куче. 
    printAll(o, i ,ii);     //4 В стеке формируется фрейм printAll, в нем создаются переменные o и ii, которые содержат 
                            // ссылку на объект и уже лежат в куче, и так же создается переменная i = 1.
    System.out.println("finished"); //7 В стэке формируется фрейм println, в котором создается ссылку на объект String  
                                    // со значением "finished". Сам же обьект String создается для хранения в куче.
}
private static void printAll(Object o, int i, int ii){
    Integer uselessVar = 700;   //5  Во фрейме printAll создается переменная uselessVar, хранит она сылку на объект 
                                //Integer, сам объект хранится в куче со значением 700.
    System.out.println(o.toString() + i + ii);  //6 В стэке формируются фреймы println и toString. 
                                                //Во фрейм println передаются переменные i = 1, ii и о с ссылками на объекты в куче, а именно Object o, Integer ii.
  }
}
``` 
Класс JvmComprehension подгружается через подсистему загрузчиков клаасов "ClassLoaders", осуществляя поиск класса на 3-х уровнях : Application, Platform, Bootstrap. Если класс нашелся на одном из уровней, он загружается, затем начинается связывание : Verify, Prepare, Resolve. Здесь происходит подготовка классов к выполнению : проверка, что код валиден, подготовка примитивов в статических полях, связывание ссылок на другие классы (если есть).

Данные об этом классе перемещаются для хранения в MetaSpace

код выполняется строка за строкой. Методы компилируются в машинный код прямо во время выполнения по очереди.

Переодически сборщик мусора собирает объкты, которые больше не используются. Два основных метода для определения объектов,

которые больше не используютя : подсчет ссылок и обход графа достижимых объектов. Обычно для сборки мусора происходит

полная остановка потоков программы для безопасной сборки мусора.
